(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["32c84838"],{"9bfb":function(t,e,s){"use strict";var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"title-bar"},[s("q-icon",{staticClass:"title-back-icon",attrs:{name:"navigate_before"},nativeOn:{click:function(e){return t.goBack(e)}}}),s("div",{staticClass:"title-tx"},[t._v(t._s(t.titleTx))])],1)},a=[];r._withStripped=!0;var o={props:["titleTx"],methods:{goBack:function(){this.$router.go(-1)}}},i=o,l=(s("a675"),s("2877")),c=Object(l["a"])(i,r,a,!1,null,null,null);c.options.__file="TitleBar.vue";e["a"]=c.exports},a675:function(t,e,s){"use strict";var r=s("ca51"),a=s.n(r);a.a},a715:function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"smitad-page"},[s("TitleBar",{attrs:{titleTx:t.title}}),s("div",{staticClass:"smitad-block"},[s("div",{staticStyle:{display:"flex","flex-direction":"column","border-bottom":"1px solid rgba(247, 241, 241, 0.726)"}},[s("div",{staticStyle:{display:"flex","justify-content":"space-around","padding-top":"10px","padding-bottom":"10px"}},[s("span",{style:"buyorder"===t.selectedTab?"color: #44566B;":"color: #6F7D8E;",on:{click:function(e){t.tabClick("buyorder")}}},[t._v(t._s(t.$t("buyorder")))]),s("span",{style:"sellorder"===t.selectedTab?"color: #44566B;":"color: #6F7D8E;",on:{click:function(e){t.tabClick("sellorder")}}},[t._v(t._s(t.$t("sellorder")))])]),s("div",{staticStyle:{display:"flex","justify-content":"space-around"}},[s("div",{staticClass:"tab-line",style:"buyorder"===t.selectedTab?"background-color:#687788;":"background-color:transparent;"}),s("div",{staticClass:"tab-line",style:"sellorder"===t.selectedTab?"background-color:#687788;":"background-color:transparent;"})])]),s("div",{staticClass:"order-block"},[s("div",{directives:[{name:"show",rawName:"v-show",value:"buyorder"===t.selectedTab,expression:"selectedTab==='buyorder'"}],staticClass:"order-list"},t._l(t.buyorders,function(e){return s("q-card",{key:e.index,staticClass:"otc-card",nativeOn:{click:function(s){t.buyCardClick(e)}}},[s("div",{staticClass:"card-item"},[s("span",{staticStyle:{color:"#6f7d8e","font-size":"13px","align-self":"center"}},[t._v(t._s(e.createdAt))]),s("span",[t._v(t._s(t.showStatus("buy",e.status)))])]),s("div",{staticClass:"card-item"},[s("span",[t._v("买入ETH")]),s("span",{staticStyle:{color:"#6f7d8e","font-size":"13px"}},[t._v("数量:"+t._s(e.amount))])]),s("div",{staticClass:"card-item"},[s("span",{staticStyle:{color:"#6f7d8e","font-size":"13px"}},[t._v("订单号："+t._s(e.remark))]),s("span",{staticStyle:{color:"#6f7d8e","font-size":"13px"}},[t._v("单价:"+t._s(e.buyprice))])]),s("div",{staticClass:"card-item",staticStyle:{"justify-content":"flex-end"}},[s("span",{staticStyle:{color:"black"}},[t._v("总价:"+t._s(e.value))])])])})),s("div",{directives:[{name:"show",rawName:"v-show",value:"sellorder"===t.selectedTab,expression:"selectedTab==='sellorder'"}],staticClass:"order-list"},t._l(t.sellorders,function(e){return s("q-card",{key:e.index,staticClass:"otc-card",nativeOn:{click:function(s){t.sellCardClick(e)}}},[s("div",{staticClass:"card-item"},[s("span",{staticStyle:{color:"#6f7d8e","font-size":"13px","align-self":"center"}},[t._v(t._s(e.createdAt))]),s("span",[t._v(t._s(t.showStatus("sell",e.status)))])]),s("div",{staticClass:"card-item"},[s("span",[t._v("卖出ETH")]),s("span",{staticStyle:{color:"#6f7d8e","font-size":"13px"}},[t._v("数量:"+t._s(e.amount))])]),s("div",{staticClass:"card-item"},[s("span",{staticStyle:{color:"#6f7d8e","font-size":"13px"}},[t._v("订单号："+t._s(e.remark))]),s("span",{staticStyle:{color:"#6f7d8e","font-size":"13px"}},[t._v("单价:"+t._s(e.buyprice))])]),s("div",{staticClass:"card-item",staticStyle:{"justify-content":"flex-end"}},[s("span",{staticStyle:{color:"black"}},[t._v("总价:"+t._s(e.value))])])])}))])])],1)},a=[];r._withStripped=!0;s("6b54");var o=s("9bfb"),i={components:{TitleBar:o["a"]},data:function(){return{title:this.$t("myorder"),selectedTab:"buyorder",sellorders:[],buyorders:[],curtconfirmOrder:""}},mounted:function(){this.getBuyOrder(),this.getSellOrder()},methods:{showStatus:function(t,e){switch(e){case"0":return"buy"===t?"待商家接单":"待您接单";case"1":return"待买家付款";case"2":return"待商家确认收款";case"3":return"已完成"}},getBuyOrder:function(){var t=this,e={buyer:this.global.wallet.ethAddress};this.$axios.get(this.global.BmobRestAPIUrl+"classes/otcorder?where="+encodeURI(JSON.stringify(e)),{headers:this.global.BmobRestAPIHeaders}).then(function(e){console.log(e),200===e.status&&(t.buyorders=e.data.results.reverse())})},getSellOrder:function(){var t=this,e={seller:this.global.wallet.ethAddress};this.$axios.get(this.global.BmobRestAPIUrl+"classes/otcorder?where="+encodeURI(JSON.stringify(e)),{headers:this.global.BmobRestAPIHeaders}).then(function(e){console.log(e),200===e.status&&(t.sellorders=e.data.results.reverse())})},tabClick:function(t){this.selectedTab=t},buyCardClick:function(t){console.log(t)},sellCardClick:function(t){console.log(t),"0"===t.status&&(this.curtconfirmOrder=t,this.showPswdInputDialog())},showPswdInputDialog:function(){var t=this;this.$q.dialog({message:this.$t("confirmOrdertip"),prompt:{model:"",type:"text"},ok:this.$t("ok"),cancel:this.$t("cancel"),color:"secondary"}).then(function(e){""===e?toast(t.$t("pswdnull")):(t.$q.loading.show({message:t.$t("txsubmiting"),spinnerSize:50}),localforage.getItem("cryptMnemonic").then(function(s){null===s?(t.$q.loading.hide(),toast(t.$t("toastnowallet")),t.$router.push("/walletfirst")):t.unlockWallet(s,e)}).catch(function(t){toast(t)}))}).catch(function(){})},unlockWallet:function(t,e){var s=this;try{var r=CryptoJS.AES.decrypt(t,e),a=r.toString(CryptoJS.enc.Utf8),o=ethers.Wallet.fromMnemonic(a),i=o.connect(this.global.defaultProvider);this.doconfirmOrder(i)}catch(t){console.error(t),toast(s.$t("passworderror")),this.$q.loading.hide()}},doconfirmOrder:function(t){var e=this,s=this.global.otcContract.connect(t),r={value:ethers.utils.parseEther(this.investAmt+"")};s.confirmOrder(ethers.utils.parseEther(this.curtconfirmOrder.amount+""),this.curtconfirmOrder.value,r).then(function(t){console.log(t),e.$q.loading.hide(),e.showInfoDialog(e.$t("submitted"),t.hash)}).catch(function(t){e.global.reprotError2Bmob(e,"inverstAgain",t),e.$q.loading.hide()})}},beforeDestroy:function(){}},l=i,c=(s("d74c"),s("2877")),n=Object(c["a"])(l,r,a,!1,null,"4c40bf82",null);n.options.__file="MyOTCOrder.vue";e["default"]=n.exports},ca51:function(t,e,s){},d74c:function(t,e,s){"use strict";var r=s("e040"),a=s.n(r);a.a},e040:function(t,e,s){}}]);